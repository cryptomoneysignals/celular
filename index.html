<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TradingView Mobile Watchlist</title>
  <script src="https://s3.tradingview.com/tv.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
    }
    #charts {
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    .chart {
      flex: 1;
    }
    #carousel {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #222;
      padding: 5px;
    }
    .symbol {
      opacity: 0.4;
      font-size: 14px;
    }
    .current {
      font-size: 20px;
      font-weight: bold;
      opacity: 1;
    }
    #controls {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 5px;
    }
    button {
      background: #444;
      border: none;
      color: #fff;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background: #666;
    }
    #watchlistPanel {
      position: fixed;
      top: 0;
      left: -80%;
      width: 80%;
      height: 100%;
      background: #111;
      transition: left 0.3s;
      z-index: 1000;
      padding: 10px;
      overflow-y: auto;
    }
    #watchlistPanel.show {
      left: 0;
    }
    #openWatchlist {
      position: fixed;
      top: 10px;
      left: 10px;
      background: #0084ff;
      color: #fff;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      z-index: 1100;
    }
    #search {
      width: 100%;
      padding: 5px;
      margin-bottom: 10px;
      border: none;
      border-radius: 6px;
    }
    .wl-item {
      padding: 8px;
      border-bottom: 1px solid #333;
      cursor: pointer;
    }
    .wl-item:hover {
      background: #333;
    }
  </style>
</head>
<body>
  <button id="openWatchlist">☰</button>
  <div id="charts">
    <div id="chart1" class="chart"></div>
    <div id="chart2" class="chart"></div>
  </div>

  <div id="carousel">
    <div id="prevSymbol" class="symbol"></div>
    <div id="currentSymbol" class="symbol current"></div>
    <div id="nextSymbol" class="symbol"></div>
  </div>

  <div id="controls">
    <button id="prevBtn">↑ Prev</button>
    <button id="nextBtn">↓ Next</button>
  </div>

  <!-- Watchlist Panel -->
  <div id="watchlistPanel">
    <input type="text" id="search" placeholder="Search symbol...">
    <div id="watchlist"></div>
  </div>

  <script>
    const symbols = [
      "BINGX:BTCUSDT.P",
      "BINGX:ETHUSDT.P",
      "BINGX:XRPUSDT.P",
      "BINGX:SOLUSDT.P",
      "BINGX:DOGEUSDT.P",
      "BINGX:ADAUSDT.P",
      "BINGX:AVAXUSDT.P",
      "BINGX:MATICUSDT.P",
      "BINGX:DOTUSDT.P",
      "BINGX:SHIBUSDT.P"
    ];

    let currentIndex = 0;
    let widget1, widget2;

    function loadCharts(symbol) {
      document.getElementById("chart1").innerHTML = "";
      document.getElementById("chart2").innerHTML = "";

      widget1 = new TradingView.widget({
        container_id: "chart1",
        symbol: symbol,
        interval: "5",
        timezone: "Etc/UTC",
        theme: "dark",
        style: "1",
        hide_top_toolbar: true,
        hide_side_toolbar: true,
        hide_volume: true,
        allow_symbol_change: false,
        autosize: true
      });

      widget2 = new TradingView.widget({
        container_id: "chart2",
        symbol: symbol,
        interval: "120",
        timezone: "Etc/UTC",
        theme: "dark",
        style: "1",
        hide_top_toolbar: true,
        hide_side_toolbar: true,
        hide_volume: true,
        allow_symbol_change: false,
        autosize: true
      });
    }

    function updateCarousel() {
      document.getElementById("prevSymbol").innerText = symbols[(currentIndex - 1 + symbols.length) % symbols.length];
      document.getElementById("currentSymbol").innerText = symbols[currentIndex];
      document.getElementById("nextSymbol").innerText = symbols[(currentIndex + 1) % symbols.length];
    }

    function changeSymbol(direction) {
      currentIndex = (currentIndex + direction + symbols.length) % symbols.length;
      loadCharts(symbols[currentIndex]);
      updateCarousel();
    }

    document.getElementById("prevBtn").addEventListener("click", () => changeSymbol(-1));
    document.getElementById("nextBtn").addEventListener("click", () => changeSymbol(1));

    // Watchlist Panel
    const panel = document.getElementById("watchlistPanel");
    document.getElementById("openWatchlist").addEventListener("click", () => {
      panel.classList.toggle("show");
    });

    const wlDiv = document.getElementById("watchlist");
    function renderWatchlist() {
      wlDiv.innerHTML = "";
      symbols.forEach((s, i) => {
        const item = document.createElement("div");
        item.className = "wl-item";
        item.innerText = s;
        item.onclick = () => {
          currentIndex = i;
          loadCharts(symbols[currentIndex]);
          updateCarousel();
          panel.classList.remove("show");
        };
        wlDiv.appendChild(item);
      });
    }

    document.getElementById("search").addEventListener("input", e => {
      const q = e.target.value.toLowerCase();
      [...wlDiv.children].forEach(c => {
        c.style.display = c.innerText.toLowerCase().includes(q) ? "block" : "none";
      });
    });

    // Init
    renderWatchlist();
    loadCharts(symbols[currentIndex]);
    updateCarousel();
  </script>
</body>
</html>
